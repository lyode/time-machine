<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mystical Oracle - Messages from the Universe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        html {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            position: fixed;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #16213e 30%, #0f1419 100%);
            width: 100vw;
            height: 100vh;
            height: 100dvh;
            color: white;
            overflow: hidden;
            position: fixed;
            top: 0;
            left: 0;
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Language Selector - Mobile Optimized */
        .language-selector {
            position: fixed;
            top: 5px;
            right: 5px;
            z-index: 3000;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(186, 85, 211, 0.3);
            border-radius: 12px;
            padding: 4px;
            transition: all 0.3s ease;
        }

        .language-btn {
            background: rgba(186, 85, 211, 0.2);
            border: 1px solid rgba(186, 85, 211, 0.5);
            color: #e8e8e8;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.6rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 1px;
            min-width: 24px;
            text-align: center;
        }

        .language-btn:hover, .language-btn.active {
            background: rgba(186, 85, 211, 0.4);
            border-color: rgba(186, 85, 211, 0.8);
            transform: translateY(-1px);
        }

        /* Cosmic Weather System */
        .cosmic-weather {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        .stellar-drift {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            animation: stellarDrift 15s linear infinite;
        }

        @keyframes stellarDrift {
            0% {
                opacity: 0;
                transform: translateX(-100px) translateY(100vh);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateX(100px) translateY(-100px);
            }
        }

        .energy-pulse {
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(186, 85, 211, 0.1) 0%, transparent 70%);
            animation: energyPulse 8s ease-in-out infinite;
        }

        @keyframes energyPulse {
            0%, 100% {
                transform: scale(0.5);
                opacity: 0.3;
            }
            50% {
                transform: scale(2);
                opacity: 0.8;
            }
        }

        /* Main Oracle Container */
        .oracle-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            height: 100dvh;
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #16213e 30%, #0f1419 100%);
            overflow: hidden;
            z-index: 1000;
            margin: 0;
            padding: 0;
            border: none;
            transition: all 0.3s ease;
        }

        .oracle-background {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        /* Enhanced Black Hole Container */
        .black-hole-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80vmin;
            height: 80vmin;
            z-index: 1001;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .black-hole-container.pulse {
            animation: cosmicPulse 2s ease-in-out;
        }

        @keyframes cosmicPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
        }

        .black-hole {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: 
                radial-gradient(circle at center, 
                    transparent 25%, 
                    rgba(0, 0, 0, 0.1) 30%, 
                    rgba(0, 0, 0, 0.6) 45%, 
                    rgba(0, 0, 0, 0.9) 55%, 
                    black 65%);
            box-shadow: 
                inset 0 0 50px rgba(186, 85, 211, 0.3),
                inset 0 0 100px rgba(138, 43, 226, 0.2),
                0 0 100px rgba(0, 0, 0, 0.8);
            animation: blackHoleSwirl 8s linear infinite;
            position: relative;
            overflow: hidden;
        }

        .black-hole::before {
            content: '';
            position: absolute;
            top: 5%;
            left: 5%;
            width: 90%;
            height: 90%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(186, 85, 211, 0.15) 0%, transparent 60%);
            animation: accretionDisk 6s linear infinite reverse;
        }

        .black-hole::after {
            content: '';
            position: absolute;
            top: 10%;
            left: 10%;
            width: 80%;
            height: 80%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            animation: quantumFluctuation 4s ease-in-out infinite;
        }

        @keyframes blackHoleSwirl {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes accretionDisk {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes quantumFluctuation {
            0%, 100% { opacity: 0.1; transform: scale(1); }
            50% { opacity: 0.3; transform: scale(1.05); }
        }

        /* Advanced Sound Wave Visualization */
        .sound-wave-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1002;
        }

        .sound-wave {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 2px solid rgba(186, 85, 211, 0.6);
            border-radius: 50%;
            opacity: 0;
            transition: all 0.1s ease-out;
        }

        .sound-wave.active {
            opacity: 1;
            animation: soundWavePulse 2s ease-out infinite;
        }

        .sound-wave.intense {
            animation: intenseSoundWave 1s ease-out infinite;
        }

        .sound-wave.gentle {
            animation: gentleSoundWave 3s ease-out infinite;
        }

        .sound-wave:nth-child(1) {
            width: 50%;
            height: 50%;
            animation-delay: 0s;
            border-color: rgba(186, 85, 211, 0.8);
        }

        .sound-wave:nth-child(2) {
            width: 65%;
            height: 65%;
            animation-delay: 0.15s;
            border-color: rgba(255, 140, 180, 0.7);
        }

        .sound-wave:nth-child(3) {
            width: 80%;
            height: 80%;
            animation-delay: 0.3s;
            border-color: rgba(138, 43, 226, 0.6);
        }

        .sound-wave:nth-child(4) {
            width: 95%;
            height: 95%;
            animation-delay: 0.45s;
            border-color: rgba(74, 144, 226, 0.5);
        }

        @keyframes soundWavePulse {
            0% {
                transform: translate(-50%, -50%) scale(0.7);
                opacity: 0;
                border-width: 3px;
            }
            30% {
                opacity: 0.9;
                border-width: 2px;
            }
            70% {
                opacity: 0.6;
                border-width: 1px;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.3);
                opacity: 0;
                border-width: 1px;
            }
        }

        @keyframes intenseSoundWave {
            0% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
                border-width: 4px;
            }
            50% {
                opacity: 1;
                border-width: 2px;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 0;
                border-width: 1px;
            }
        }

        @keyframes gentleSoundWave {
            0% {
                transform: translate(-50%, -50%) scale(0.9);
                opacity: 0;
                border-width: 1px;
            }
            30% {
                opacity: 0.7;
                border-width: 2px;
            }
            70% {
                opacity: 0.4;
                border-width: 1px;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 0;
                border-width: 1px;
            }
        }

        /* Enhanced Particle System */
        .mystical-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .mystical-particle {
            position: absolute;
            border-radius: 50%;
            animation: mysticalFloat 8s ease-in-out infinite;
            filter: blur(0.5px);
        }

        .mystical-particle.special {
            animation: specialFloat 12s ease-in-out infinite;
            filter: blur(0px);
        }

        @keyframes mysticalFloat {
            0%, 100% {
                transform: translateY(100vh) scale(0) rotate(0deg);
                opacity: 0;
            }
            5% {
                opacity: 0.8;
                transform: translateY(95vh) scale(1) rotate(45deg);
            }
            95% {
                opacity: 0.8;
                transform: translateY(-5vh) scale(0.8) rotate(315deg);
            }
            100% {
                transform: translateY(-10vh) scale(0) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes specialFloat {
            0%, 100% {
                transform: translateY(100vh) scale(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: translateY(80vh) scale(1.2) rotate(90deg);
            }
            50% {
                opacity: 0.9;
                transform: translateY(50vh) scale(0.8) rotate(180deg);
            }
            90% {
                opacity: 1;
                transform: translateY(20vh) scale(1.1) rotate(270deg);
            }
            100% {
                transform: translateY(-10vh) scale(0) rotate(360deg);
                opacity: 0;
            }
        }

        .aurora-lights {
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at 15% 60%, rgba(186, 85, 211, 0.25) 0%, transparent 50%),
                radial-gradient(ellipse at 85% 30%, rgba(138, 43, 226, 0.25) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 80%, rgba(147, 112, 219, 0.2) 0%, transparent 50%),
                radial-gradient(ellipse at 30% 20%, rgba(123, 104, 238, 0.15) 0%, transparent 50%);
            animation: auroraShift 15s ease-in-out infinite;
        }

        .aurora-lights.enhanced {
            animation: enhancedAuroraShift 10s ease-in-out infinite;
        }

        @keyframes auroraShift {
            0%, 100% { 
                opacity: 0.7; 
                transform: scale(1) rotate(0deg);
                filter: hue-rotate(0deg);
            }
            25% { 
                opacity: 0.9; 
                transform: scale(1.05) rotate(1deg);
                filter: hue-rotate(15deg);
            }
            50% { 
                opacity: 0.5; 
                transform: scale(0.98) rotate(-1deg);
                filter: hue-rotate(30deg);
            }
            75% { 
                opacity: 0.8; 
                transform: scale(1.02) rotate(0.5deg);
                filter: hue-rotate(15deg);
            }
        }

        @keyframes enhancedAuroraShift {
            0%, 100% { 
                opacity: 0.9; 
                transform: scale(1) rotate(0deg);
                filter: hue-rotate(0deg) brightness(1.2);
            }
            33% { 
                opacity: 1; 
                transform: scale(1.1) rotate(2deg);
                filter: hue-rotate(30deg) brightness(1.4);
            }
            66% { 
                opacity: 0.8; 
                transform: scale(0.95) rotate(-2deg);
                filter: hue-rotate(60deg) brightness(1.1);
            }
        }

        /* Gesture Detection Areas */
        .gesture-area {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 500;
            pointer-events: auto;
        }

        /* Oracle Landing Screen */
        .oracle-landing {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            opacity: 1;
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            animation: landingBreathe 6s ease-in-out infinite;
            z-index: 2000;
        }

        .oracle-landing.hidden {
            opacity: 0;
            visibility: hidden;
            transform: translate(-50%, -50%) scale(0.85);
        }

        @keyframes landingBreathe {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.02); }
        }

        .floating-ask {
            position: relative;
            cursor: pointer;
            margin-bottom: 30px;
            animation: gentleFloat 4s ease-in-out infinite;
            transition: all 0.3s ease;
        }

        .floating-ask:active {
            transform: scale(0.95);
        }

        .ask-text {
            font-size: 3.5rem;
            font-weight: 300;
            color: #e8e8e8;
            text-shadow: 0 0 30px rgba(186, 85, 211, 0.6);
            letter-spacing: 6px;
            position: relative;
            z-index: 1;
            font-family: 'Georgia', serif;
            font-style: italic;
            transition: all 0.3s ease;
        }

        .ask-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 180px;
            height: 180px;
            border-radius: 50%;
            animation: pulseGlow 4s ease-in-out infinite, colorShift 8s ease-in-out infinite;
        }

        @keyframes gentleFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-12px); }
        }

        @keyframes pulseGlow {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
        }

        @keyframes colorShift {
            0%, 100% { 
                background: radial-gradient(circle, rgba(186, 85, 211, 0.3) 0%, transparent 70%);
            }
            25% { 
                background: radial-gradient(circle, rgba(138, 43, 226, 0.3) 0%, transparent 70%);
            }
            50% { 
                background: radial-gradient(circle, rgba(147, 112, 219, 0.3) 0%, transparent 70%);
            }
            75% { 
                background: radial-gradient(circle, rgba(123, 104, 238, 0.3) 0%, transparent 70%);
            }
        }

        .oracle-subtitle {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            font-style: italic;
            animation: fadeIn 2s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 0.7; }
        }

        /* Floating Words */
        .floating-words-container {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 2000;
        }

        .floating-words-container.active {
            opacity: 1;
            visibility: visible;
        }

        .floating-words {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .floating-word {
            position: absolute;
            color: #e8e8e8;
            cursor: pointer;
            font-family: 'Georgia', serif;
            font-style: italic;
            text-shadow: 0 0 20px rgba(186, 85, 211, 0.5);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: wordFloat 8s ease-in-out infinite;
            opacity: 0;
            user-select: none;
            transform-origin: center;
        }

        .floating-word.big {
            font-size: 2.2rem;
            font-weight: 500;
            letter-spacing: 1.5px;
        }

        .floating-word.medium {
            font-size: 1.8rem;
            font-weight: 400;
            letter-spacing: 1px;
        }

        .floating-word.small {
            font-size: 1.3rem;
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        .floating-word:hover {
            transform: scale(1.2) rotate(1deg);
            text-shadow: 
                0 0 25px rgba(186, 85, 211, 1),
                0 0 50px rgba(186, 85, 211, 0.8),
                0 0 75px rgba(186, 85, 211, 0.6);
            color: #dda0dd;
            animation-play-state: paused;
        }

        .floating-word:active {
            transform: scale(1.1) rotate(-1deg);
            transition: transform 0.1s ease;
        }

        .floating-word.selected {
            animation: selectedWordPulse 0.5s ease-in-out;
        }

        @keyframes selectedWordPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        @keyframes wordFloat {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.7) rotate(-5deg);
                filter: blur(2px);
            }
            15% {
                opacity: 1;
                transform: translateY(0px) scale(1) rotate(0deg);
                filter: blur(0px);
            }
            85% {
                opacity: 1;
                transform: translateY(-15px) scale(1.05) rotate(2deg);
                filter: blur(0px);
            }
            100% {
                opacity: 0;
                transform: translateY(-40px) scale(0.8) rotate(5deg);
                filter: blur(1px);
            }
        }

        /* Enhanced Message Display */
        .message-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 95%;
            max-width: 600px;
            text-align: center;
            opacity: 0;
            visibility: hidden;
            transition: all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 2000;
            padding: 0 10px;
        }

        .message-container.active {
            opacity: 1;
            visibility: visible;
        }

        .bright-message {
            background: 
                radial-gradient(circle at 30% 30%, rgba(186, 85, 211, 0.1) 0%, transparent 50%),
                rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(186, 85, 211, 0.4);
            border-radius: 20px;
            padding: 30px 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(20px);
            animation: messageFloatUp 2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }

        .bright-message::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(186, 85, 211, 0.1), transparent);
            animation: shimmerMessage 6s ease-in-out infinite;
        }

        .bright-message p {
            font-size: 1.2rem;
            line-height: 1.7;
            color: #f0f0f0;
            font-family: 'Georgia', serif;
            font-style: italic;
            margin: 0;
            text-shadow: 0 0 20px rgba(186, 85, 211, 0.4);
            position: relative;
            z-index: 1;
            letter-spacing: 0.3px;
        }

        @keyframes messageFloatUp {
            0% {
                opacity: 0;
                transform: translateY(50px) scale(0.85);
                filter: blur(3px);
            }
            50% {
                opacity: 0.8;
                transform: translateY(-5px) scale(1.02);
                filter: blur(1px);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0px);
            }
        }

        @keyframes shimmerMessage {
            0%, 100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .message-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            animation: actionsAppear 2.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 1s both;
            flex-direction: column;
            align-items: center;
        }

        @keyframes actionsAppear {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.8);
            }
            60% {
                opacity: 0.8;
                transform: translateY(-3px) scale(1.05);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .oracle-button {
            background: rgba(186, 85, 211, 0.15);
            border: 2px solid rgba(186, 85, 211, 0.6);
            color: #f0f0f0;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-family: 'Georgia', serif;
            font-style: italic;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden;
            letter-spacing: 0.8px;
            font-weight: 400;
            width: 200px;
            text-align: center;
        }

        .oracle-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .oracle-button:hover::before {
            left: 100%;
        }

        .oracle-button:hover {
            background: rgba(186, 85, 211, 0.3);
            border-color: rgba(186, 85, 211, 0.9);
            transform: translateY(-2px) scale(1.03);
            box-shadow: 
                0 10px 25px rgba(186, 85, 211, 0.4),
                0 0 20px rgba(186, 85, 211, 0.3);
            text-shadow: 0 0 12px rgba(186, 85, 211, 0.8);
        }

        .oracle-button:active {
            transform: translateY(-1px) scale(1.01);
            transition: transform 0.1s ease;
        }

        .noted-btn {
            background: rgba(46, 204, 113, 0.15);
            border-color: rgba(46, 204, 113, 0.6);
        }

        .noted-btn:hover {
            background: rgba(46, 204, 113, 0.3);
            border-color: rgba(46, 204, 113, 0.9);
            box-shadow: 
                0 10px 25px rgba(46, 204, 113, 0.4),
                0 0 20px rgba(46, 204, 113, 0.3);
            text-shadow: 0 0 12px rgba(46, 204, 113, 0.8);
        }

        .more-btn {
            background: rgba(241, 196, 15, 0.15);
            border-color: rgba(241, 196, 15, 0.6);
        }

        .more-btn:hover {
            background: rgba(241, 196, 15, 0.3);
            border-color: rgba(241, 196, 15, 0.9);
            box-shadow: 
                0 10px 25px rgba(241, 196, 15, 0.4),
                0 0 20px rgba(241, 196, 15, 0.3);
            text-shadow: 0 0 12px rgba(241, 196, 15, 0.8);
        }

        /* Enhanced Wishes Screen */
        .wishes-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 95%;
            max-width: 500px;
            text-align: center;
            opacity: 0;
            visibility: hidden;
            transition: all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 2000;
            padding: 0 10px;
        }

        .wishes-container.active {
            opacity: 1;
            visibility: visible;
        }

        .wishes-message {
            background: 
                radial-gradient(circle at 70% 70%, rgba(46, 204, 113, 0.1) 0%, transparent 50%),
                rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(46, 204, 113, 0.4);
            border-radius: 20px;
            padding: 30px 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(20px);
            animation: wishesFloatUp 2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }

        .wishes-message::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(46, 204, 113, 0.1), transparent);
            animation: shimmerWish 6s ease-in-out infinite;
        }

        .wishes-message p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #f0f0f0;
            font-family: 'Georgia', serif;
            font-style: italic;
            margin: 0;
            text-shadow: 0 0 20px rgba(46, 204, 113, 0.4);
            position: relative;
            z-index: 1;
            letter-spacing: 0.3px;
        }

        @keyframes wishesFloatUp {
            0% {
                opacity: 0;
                transform: translateY(40px) scale(0.9);
                filter: blur(2px);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0px);
            }
        }

        @keyframes shimmerWish {
            0%, 100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .back-btn {
            background: rgba(186, 85, 211, 0.15);
            border-color: rgba(186, 85, 211, 0.6);
            animation: backBtnAppear 2.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 1s both;
        }

        @keyframes backBtnAppear {
            0% {
                opacity: 0;
                transform: translateY(25px) scale(0.8);
            }
            60% {
                opacity: 0.8;
                transform: translateY(-3px) scale(1.05);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Enhanced Black Hole speaking state */
        .black-hole-container.speaking .black-hole {
            box-shadow: 
                inset 0 0 50px rgba(186, 85, 211, 0.8),
                inset 0 0 100px rgba(138, 43, 226, 0.6),
                0 0 150px rgba(186, 85, 211, 0.4),
                0 0 200px rgba(138, 43, 226, 0.3);
        }

        .black-hole-container.speaking .black-hole::before {
            background: radial-gradient(circle, rgba(186, 85, 211, 0.4) 0%, transparent 60%);
        }

        /* Wisdom Level Indicator */
        .wisdom-level {
            position: fixed;
            bottom: 10px;
            left: 10px;
            z-index: 3000;
            display: flex;
            align-items: center;
            gap: 5px;
            opacity: 0.7;
            transition: all 0.3s ease;
        }

        .wisdom-orb {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(186, 85, 211, 0.4);
            transition: all 0.3s ease;
        }

        .wisdom-orb.active {
            background: rgba(186, 85, 211, 1);
            box-shadow: 0 0 10px rgba(186, 85, 211, 0.8);
        }

        /* Progressive Enhancement Indicator */
        .enhancement-glow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            opacity: 0;
            animation: enhancementPulse 3s ease-in-out infinite;
        }

        .black-hole-container.enhanced .enhancement-glow {
            opacity: 1;
        }

        @keyframes enhancementPulse {
            0%, 100% { transform: scale(1); opacity: 0.1; }
            50% { transform: scale(1.05); opacity: 0.3; }
        }

        /* Mobile-First Responsive Design */
        
        /* Extra Small Mobile Devices (Portrait) */
        @media (max-width: 320px) {
            .ask-text {
                font-size: 2.8rem;
                letter-spacing: 4px;
            }

            .oracle-subtitle {
                font-size: 0.9rem;
            }

            .floating-word.big {
                font-size: 1.8rem;
            }

            .floating-word.medium {
                font-size: 1.5rem;
            }

            .floating-word.small {
                font-size: 1.1rem;
            }

            .bright-message,
            .wishes-message {
                padding: 20px 15px;
                margin-bottom: 20px;
            }

            .bright-message p {
                font-size: 1rem;
                line-height: 1.5;
            }

            .wishes-message p {
                font-size: 0.95rem;
                line-height: 1.5;
            }

            .oracle-button {
                padding: 12px 25px;
                font-size: 0.95rem;
                width: 180px;
            }

            .message-actions {
                gap: 10px;
            }

            .black-hole-container {
                width: 95vmin;
                height: 95vmin;
            }
        }

        /* Small Mobile Devices */
        @media (min-width: 321px) and (max-width: 375px) {
            .ask-text {
                font-size: 3.2rem;
                letter-spacing: 5px;
            }

            .floating-word.big {
                font-size: 2rem;
            }

            .floating-word.medium {
                font-size: 1.6rem;
            }

            .floating-word.small {
                font-size: 1.2rem;
            }

            .black-hole-container {
                width: 90vmin;
                height: 90vmin;
            }
        }

        /* Standard Mobile Devices */
        @media (min-width: 376px) and (max-width: 414px) {
            .ask-text {
                font-size: 3.8rem;
                letter-spacing: 6px;
            }

            .floating-word.big {
                font-size: 2.3rem;
            }

            .floating-word.medium {
                font-size: 1.9rem;
            }

            .floating-word.small {
                font-size: 1.4rem;
            }
        }

        /* Large Mobile Devices */
        @media (min-width: 415px) and (max-width: 768px) {
            .ask-text {
                font-size: 4.2rem;
                letter-spacing: 7px;
            }

            .floating-word.big {
                font-size: 2.6rem;
            }

            .floating-word.medium {
                font-size: 2.1rem;
            }

            .floating-word.small {
                font-size: 1.6rem;
            }

            .bright-message p {
                font-size: 1.3rem;
                line-height: 1.8;
            }

            .wishes-message p {
                font-size: 1.2rem;
                line-height: 1.7;
            }

            .oracle-button {
                padding: 16px 32px;
                font-size: 1.15rem;
                width: 220px;
            }

            .message-actions {
                gap: 18px;
            }
        }

        /* Tablet and Desktop - Secondary Experience */
        @media (min-width: 769px) {
            .language-selector {
                top: 10px;
                right: 10px;
                padding: 8px;
            }

            .language-btn {
                padding: 6px 12px;
                font-size: 0.7rem;
                margin: 0 3px;
            }

            .ask-text {
                font-size: 4.8rem;
                letter-spacing: 8px;
            }

            .floating-word.big {
                font-size: 3rem;
                letter-spacing: 2px;
            }

            .floating-word.medium {
                font-size: 2.4rem;
            }

            .floating-word.small {
                font-size: 1.8rem;
            }

            .message-container,
            .wishes-container {
                width: 80%;
                max-width: 700px;
            }

            .bright-message,
            .wishes-message {
                padding: 40px 35px;
                margin-bottom: 30px;
            }

            .bright-message p {
                font-size: 1.5rem;
                line-height: 1.9;
            }

            .wishes-message p {
                font-size: 1.35rem;
                line-height: 1.8;
            }

            .oracle-button {
                padding: 18px 35px;
                font-size: 1.25rem;
                width: auto;
                min-width: 160px;
            }

            .message-actions {
                flex-direction: row;
                gap: 25px;
            }

            .black-hole-container {
                width: 75vmin;
                height: 75vmin;
            }
        }

        /* Landscape Mobile Orientation */
        @media (max-height: 500px) and (orientation: landscape) {
            .ask-text {
                font-size: 2.5rem;
                letter-spacing: 4px;
            }

            .oracle-subtitle {
                font-size: 0.9rem;
                margin-bottom: 15px;
            }

            .floating-word.big {
                font-size: 1.6rem;
            }

            .floating-word.medium {
                font-size: 1.3rem;
            }

            .floating-word.small {
                font-size: 1rem;
            }

            .bright-message,
            .wishes-message {
                padding: 15px 20px;
                margin-bottom: 15px;
            }

            .bright-message p {
                font-size: 0.95rem;
                line-height: 1.4;
            }

            .wishes-message p {
                font-size: 0.9rem;
                line-height: 1.4;
            }

            .oracle-button {
                padding: 10px 20px;
                font-size: 0.9rem;
                width: 150px;
            }

            .black-hole-container {
                width: 70vmin;
                height: 70vmin;
            }

            .message-actions {
                gap: 12px;
            }
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #16213e 30%, #0f1419 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 5000;
            opacity: 1;
            transition: opacity 1s ease-out;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 2px solid rgba(186, 85, 211, 0.3);
            border-top: 2px solid rgba(186, 85, 211, 1);
            border-radius: 50%;
            animation: spin 2s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            font-style: italic;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Awakening cosmic consciousness...</div>
    </div>

    <!-- Language Selector -->
    <div class="language-selector">
        <button class="language-btn active" onclick="switchLanguage('en')">EN</button>
        <button class="language-btn" onclick="switchLanguage('zh')">中文</button>
    </div>

    <!-- Wisdom Level Indicator -->
    <div class="wisdom-level" id="wisdomLevel">
        <div class="wisdom-orb"></div>
        <div class="wisdom-orb"></div>
        <div class="wisdom-orb"></div>
        <div class="wisdom-orb"></div>
        <div class="wisdom-orb"></div>
    </div>

    <!-- Main Oracle Container -->
    <div class="oracle-container" id="oracleContainer">
        <div class="oracle-background">
            <div class="cosmic-weather" id="cosmicWeather"></div>
            <div class="mystical-particles" id="mysticalParticles"></div>
            <div class="aurora-lights" id="auroraLights"></div>
        </div>
        
        <!-- Gesture Detection Area -->
        <div class="gesture-area" id="gestureArea"></div>
        
        <!-- Black Hole Container -->
        <div class="black-hole-container" id="blackHoleContainer">
            <div class="black-hole">
                <div class="enhancement-glow"></div>
                <!-- Sound Wave Visualization -->
                <div class="sound-wave-container" id="soundWaveContainer">
                    <div class="sound-wave"></div>
                    <div class="sound-wave"></div>
                    <div class="sound-wave"></div>
                    <div class="sound-wave"></div>
                </div>
            </div>
        </div>
        
        <!-- Landing Screen with 'aSk' -->
        <div class="oracle-landing" id="oracleLanding">
            <div class="floating-ask" id="floatingAsk" onclick="initiateOracleSession()">
                <span class="ask-text" data-en="aSk" data-zh="問">aSk</span>
                <div class="ask-glow"></div>
            </div>
            <div class="oracle-subtitle" data-en="What seeks to be known?" data-zh="什麼渴望被知曉？">What seeks to be known?</div>
        </div>
        
        <!-- Floating Words Screen -->
        <div class="floating-words-container" id="floatingWordsContainer">
            <div class="floating-words" id="floatingWords"></div>
        </div>
        
        <!-- Message Display -->
        <div class="message-container" id="messageContainer">
            <div class="bright-message" id="brightMessage"></div>
            <div class="message-actions" id="messageActions">
                <button class="oracle-button noted-btn" onclick="showWishes()" data-en="noTed" data-zh="記下">noTed</button>
                <button class="oracle-button more-btn" onclick="showMoreWords()" data-en="i wAnt moRe" data-zh="我想要更多">i wAnt moRe</button>
            </div>
        </div>
        
        <!-- Wishes Screen -->
        <div class="wishes-container" id="wishesContainer">
            <div class="wishes-message" id="wishesMessage"></div>
            <button class="oracle-button back-btn" onclick="returnToLanding()" data-en="aSk" data-zh="問">aSk</button>
        </div>
    </div>

    <script>
        // Advanced Oracle System with Progressive Enhancement
        let currentLanguage = 'en';
        let usedWords = new Set();
        let usedMessages = new Set();
        let usedWishes = new Set();
        let sessionCount = 0;
        let wisdomLevel = 0;
        let enhancementLevel = 0;
        let lastInteractionTime = Date.now();
        let cosmicWeatherActive = false;

        // Enhanced Touch and Gesture Support
        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;
        let touchEndY = 0;
        let isTouch = false;

        // Advanced AI Word Generation with Quantum Linguistics
        const quantumPrefixes = {
            en: ['neo', 'echo', 'astra', 'lumi', 'nova', 'zen', 'flux', 'arc', 'void', 'meta', 'sync', 'vibe', 'flow', 'drift', 'pulse', 'quantum', 'ethereal', 'cosmic', 'astral', 'temporal', 'primal', 'infinite', 'sacred', 'mystic', 'divine'],
            zh: ['靈', '魂', '幻', '夢', '星', '月', '雲', '風', '空', '神', '妙', '禪', '境', '覺', '悟', '量子', '以太', '宇宙', '星體', '時空', '原始', '無限', '神聖', '神秘', '神性']
        };

        const quantumSuffixes = {
            en: ['ance', 'ence', 'ism', 'ity', 'ness', 'ion', 'ment', 'ship', 'ward', 'wise', 'like', 'form', 'way', 'path', 'gate', 'field', 'wave', 'flow', 'core', 'essence'],
            zh: ['性', '態', '境', '感', '意', '念', '象', '相', '理', '法', '道', '源', '流', '韻', '氣', '場', '波', '流', '核', '精']
        };

        const quantumRoots = {
            en: ['lumina', 'spectral', 'ethereal', 'temporal', 'celestial', 'quantum', 'cosmic', 'primal', 'transcend', 'infinite', 'mystic', 'radiant', 'sublime', 'profound', 'sacred', 'nexus', 'matrix', 'vortex', 'resonance', 'harmony', 'synthesis', 'emergence', 'consciousness', 'manifestation', 'transformation'],
            zh: ['靈魂', '神秘', '天象', '時空', '量子', '無限', '永恆', '超越', '深層', '神聖', '純淨', '光明', '智慧', '覺醒', '圓滿', '連結', '矩陣', '漩渦', '共鳴', '和諧', '綜合', '湧現', '意識', '顯化', '轉化']
        };

        // Multi-dimensional Story Templates with Complexity Levels
        const advancedStoryTemplates = {
            en: [
                // Level 1: Simple
                "In the {realm} where {element} {action}, a {entity} discovers that {revelation}... {wisdom} teaches us that {truth}. The {metaphor} reminds you that {personal_insight}.",
                
                // Level 2: Intermediate  
                "From the {perspective} of {cosmic_force}, {phenomenon} reveals itself as {meaning}... What appears as {illusion} is actually {reality}. Your {quality} holds the key to {unlock}, for the {teacher} knows that {lesson}.",
                
                // Level 3: Complex
                "Between the {boundary_1} and {boundary_2}, {discovery} unfolds like {simile}... The {teacher} whispers that {secret}, while {cosmic_force} demonstrates how {process} leads to {transformation}. When {condition}, the {metaphor} becomes a gateway to {higher_truth}.",
                
                // Level 4: Advanced
                "Through the lens of {viewpoint}, {subject} transforms into {new_form} as {cosmic_force} orchestrates the dance between {force_1} and {force_2}... {ancient_wisdom} reveals that {complex_truth}, and the {observer} witnesses how {phenomenon} creates {cascade_effect}. Your journey toward {destination} involves understanding that {paradox}.",
                
                // Level 5: Master
                "In the multidimensional dance between {force_1} and {force_2}, {creation} emerges with {quality} while {cosmic_intelligence} weaves together {pattern_1}, {pattern_2}, and {pattern_3}... The {teacher} reveals that {profound_truth}, demonstrating how {process_1} leads to {process_2}, which in turn manifests as {final_manifestation}. Your {essence} resonates with {cosmic_frequency}, unlocking {infinite_potential} through the sacred geometry of {transformation_path}."
            ],
            zh: [
                // Level 1: 簡單
                "在{境界}中，{元素}{動作}時，{存在}發現{啟示}... {智慧}教導我們{真理}。{比喻}提醒你{個人洞察}。",
                
                // Level 2: 中級
                "從{宇宙力量}的{視角}，{現象}顯現為{意義}... 看似{幻象}的實際上是{實相}。你的{品質}擁有{解鎖}的鑰匙，因為{導師}知道{課程}。",
                
                // Level 3: 複雜
                "在{邊界一}與{邊界二}之間，{發現}如{比擬}般展開... {導師}低語著{秘密}，而{宇宙力量}展示了{過程}如何導致{轉化}。當{條件}時，{比喻}成為通往{更高真理}的門戶。",
                
                // Level 4: 高級
                "透過{觀點}的鏡頭，{主體}轉化為{新形式}，當{宇宙力量}編排{力量一}與{力量二}之間的舞蹈... {古老智慧}揭示{複雜真理}，{觀察者}見證{現象}如何創造{連鎖效應}。你通往{目的地}的旅程涉及理解{悖論}。",
                
                // Level 5: 大師
                "在{力量一}與{力量二}的多維舞蹈中，{創造}以{品質}出現，而{宇宙智慧}將{模式一}、{模式二}和{模式三}編織在一起... {導師}揭示{深刻真理}，展示{過程一}如何導致{過程二}，進而顯現為{最終顯化}。你的{本質}與{宇宙頻率}共鳴，通過{轉化路徑}的神聖幾何解鎖{無限潛能}。"
            ]
        };

        // Enhanced story elements with multiple complexity tiers
        const enhancedStoryElements = {
            en: {
                // Basic elements
                realm: ['dimension', 'void', 'cosmos', 'infinity', 'consciousness', 'dreamscape', 'quantum field', 'astral plane'],
                element: ['light', 'shadow', 'energy', 'time', 'space', 'vibration', 'frequency', 'essence'],
                action: ['dances', 'flows', 'pulses', 'resonates', 'transforms', 'awakens', 'merges', 'ascends'],
                
                // Advanced elements
                cosmic_intelligence: ['universal mind', 'cosmic consciousness', 'divine intelligence', 'quantum awareness', 'galactic wisdom'],
                pattern_1: ['sacred geometry', 'fibonacci sequences', 'golden ratio spirals', 'mandala formations', 'crystalline structures'],
                pattern_2: ['wave interference', 'harmonic resonance', 'fractal recursion', 'holographic projection', 'dimensional folding'],
                pattern_3: ['quantum entanglement', 'morphic resonance', 'synchronistic alignment', 'archetypal emergence', 'consciousness evolution'],
                
                // Master level elements
                transformation_path: ['spiral of awakening', 'labyrinth of consciousness', 'tree of life ascension', 'chakra activation sequence', 'dimensional transcendence'],
                cosmic_frequency: ['Schumann resonance', 'universal heartbeat', 'galactic pulse', 'DNA activation frequency', 'love vibration'],
                infinite_potential: ['quantum superposition', 'multiversal possibilities', 'consciousness expansion', 'reality creation', 'divine co-creation'],
                final_manifestation: ['enlightened being', 'cosmic citizen', 'multidimensional self', 'ascended consciousness', 'universal love embodiment']
            },
            zh: {
                // 基本元素
                境界: ['維度', '虛空', '宇宙', '無限', '意識', '夢境', '量子場', '星光界'],
                元素: ['光', '影', '能量', '時間', '空間', '振動', '頻率', '本質'],
                動作: ['舞動', '流動', '脈動', '共鳴', '轉化', '覺醒', '融合', '昇華'],
                
                // 高級元素
                宇宙智慧: ['宇宙心智', '宇宙意識', '神聖智慧', '量子覺知', '銀河智慧'],
                模式一: ['神聖幾何', '費氏數列', '黃金比例螺旋', '曼陀羅形成', '水晶結構'],
                模式二: ['波動干涉', '和諧共鳴', '分形遞歸', '全息投影', '維度摺疊'],
                模式三: ['量子糾纏', '形態共鳴', '同步對齊', '原型湧現', '意識演化'],
                
                // 大師級元素
                轉化路徑: ['覺醒螺旋', '意識迷宮', '生命樹昇華', '脈輪激活序列', '維度超越'],
                宇宙頻率: ['舒曼共振', '宇宙心跳', '銀河脈動', 'DNA激活頻率', '愛的振動'],
                無限潛能: ['量子疊加', '多元宇宙可能性', '意識擴展', '實相創造', '神聖共創'],
                最終顯化: ['開悟存在', '宇宙公民', '多維自我', '揚昇意識', '宇宙愛體現']
            }
        };

        // Progressive greetings that evolve with wisdom level
        const evolutionaryGreetings = {
            en: [
                // Level 0-1: Beginner
                "What seeks to be known?",
                "Ancient wisdom awaits your touch...",
                "The universe has been expecting you...",
                
                // Level 2-3: Intermediate
                "Your consciousness expands the cosmic web...",
                "Quantum possibilities align with your presence...",
                "The galactic council acknowledges your arrival...",
                
                // Level 4-5: Advanced
                "Multidimensional gateways open to your frequency...",
                "The akashic records shimmer with anticipation...",
                "Divine intelligence recognizes a fellow traveler..."
            ],
            zh: [
                // Level 0-1: 初學者
                "什麼渴望被知曉？",
                "古老的智慧等待你的觸碰...",
                "宇宙一直在等待你...",
                
                // Level 2-3: 中級
                "你的意識擴展了宇宙網絡...",
                "量子可能性與你的臨在對齊...",
                "銀河議會承認你的到來...",
                
                // Level 4-5: 高級
                "多維門戶向你的頻率開放...",
                "阿卡西記錄因期待而閃耀...",
                "神聖智慧認出了同路人..."
            ]
        };

        // Haptic feedback patterns
        const hapticPatterns = {
            gentle: [100],
            medium: [200],
            strong: [300],
            pulse: [100, 50, 100],
            wave: [50, 100, 150, 100, 50],
            cosmic: [100, 100, 200, 100, 100]
        };

        // Initialize Oracle System
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                hideLoadingScreen();
                initializeAdvancedOracle();
            }, 2000);
        });

        function hideLoadingScreen() {
            const loadingScreen = document.getElementById('loadingScreen');
            loadingScreen.classList.add('hidden');
            setTimeout(() => {
                loadingScreen.style.display = 'none';
            }, 1000);
        }

        function initializeAdvancedOracle() {
            generateEnhancedMysticalParticles();
            initializeCosmicWeather();
            setupAdvancedGestureDetection();
            activateBlackHoleEffects();
            setEvolutionaryGreeting();
            initializeWisdomTracking();
            startCosmicBackground();
        }

        function generateEnhancedMysticalParticles() {
            const container = document.getElementById('mysticalParticles');
            if (!container) return;
            
            container.innerHTML = '';
            
            const particleCount = Math.min(30 + enhancementLevel * 5, 50);
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('mystical-particle');
                
                // Enhanced particles with wisdom level
                if (wisdomLevel >= 3 && Math.random() > 0.7) {
                    particle.classList.add('special');
                }
                
                const size = 2 + Math.random() * (8 + enhancementLevel);
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                const colors = [
                    'rgba(186, 85, 211, 0.8)',
                    'rgba(138, 43, 226, 0.7)',
                    'rgba(147, 112, 219, 0.6)',
                    'rgba(123, 104, 238, 0.8)',
                    'rgba(221, 160, 221, 0.7)',
                    // Enhanced colors for higher wisdom levels
                    'rgba(255, 215, 0, 0.6)',
                    'rgba(255, 255, 255, 0.5)'
                ];
                
                const colorIndex = Math.min(Math.floor(Math.random() * colors.length), colors.length - 1);
                const randomColor = colors[colorIndex];
                particle.style.background = `radial-gradient(circle, ${randomColor} 0%, transparent 70%)`;
                
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 12 + 's';
                particle.style.animationDuration = (8 + Math.random() * 6) + 's';
                
                container.appendChild(particle);
            }
        }

        function initializeCosmicWeather() {
            const container = document.getElementById('cosmicWeather');
            if (!container) return;
            
            // Generate stellar drift particles
            for (let i = 0; i < 10; i++) {
                const stellar = document.createElement('div');
                stellar.classList.add('stellar-drift');
                stellar.style.left = Math.random() * 100 + '%';
                stellar.style.animationDelay = Math.random() * 15 + 's';
                stellar.style.animationDuration = (10 + Math.random() * 10) + 's';
                container.appendChild(stellar);
            }
            
            // Generate energy pulses
            for (let i = 0; i < 5; i++) {
                const pulse = document.createElement('div');
                pulse.classList.add('energy-pulse');
                pulse.style.left = Math.random() * 100 + '%';
                pulse.style.top = Math.random() * 100 + '%';
                pulse.style.animationDelay = Math.random() * 8 + 's';
                container.appendChild(pulse);
            }
        }

        function setupAdvancedGestureDetection() {
            const gestureArea = document.getElementById('gestureArea');
            if (!gestureArea) return;
            
            // Touch events
            gestureArea.addEventListener('touchstart', handleTouchStart, { passive: false });
            gestureArea.addEventListener('touchmove', handleTouchMove, { passive: false });
            gestureArea.addEventListener('touchend', handleTouchEnd, { passive: false });
            
            // Mouse events for desktop
            gestureArea.addEventListener('mousedown', handleMouseDown);
            gestureArea.addEventListener('mousemove', handleMouseMove);
            gestureArea.addEventListener('mouseup', handleMouseUp);
            
            // Prevent default behaviors
            gestureArea.addEventListener('contextmenu', e => e.preventDefault());
            gestureArea.addEventListener('selectstart', e => e.preventDefault());
        }

        function handleTouchStart(e) {
            e.preventDefault();
            isTouch = true;
            const touch = e.touches[0];
            touchStartX = touch.clientX;
            touchStartY = touch.clientY;
            
            triggerHapticFeedback('gentle');
            activateCosmicResponse('touch');
        }

        function handleTouchMove(e) {
            e.preventDefault();
            if (!isTouch) return;
            
            const touch = e.touches[0];
            const deltaX = touch.clientX - touchStartX;
            const deltaY = touch.clientY - touchStartY;
            
            // Create following effect
            createFollowingEffect(touch.clientX, touch.clientY);
        }

        function handleTouchEnd(e) {
            e.preventDefault();
            if (!isTouch) return;
            
            const touch = e.changedTouches[0];
            touchEndX = touch.clientX;
            touchEndY = touch.clientY;
            
            const deltaX = touchEndX - touchStartX;
            const deltaY = touchEndY - touchStartY;
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            
            if (distance > 50) {
                handleSwipeGesture(deltaX, deltaY);
            } else {
                handleTapGesture(touchEndX, touchEndY);
            }
            
            isTouch = false;
        }

        function handleSwipeGesture(deltaX, deltaY) {
            const threshold = 30;
            
            if (Math.abs(deltaX) > Math.abs(deltaY)) {
                if (deltaX > threshold) {
                    // Swipe right - next phase
                    triggerHapticFeedback('wave');
                    nextEvolutionPhase();
                } else if (deltaX < -threshold) {
                    // Swipe left - previous phase
                    triggerHapticFeedback('pulse');
                    previousPhase();
                }
            } else {
                if (deltaY > threshold) {
                    // Swipe down - deeper wisdom
                    triggerHapticFeedback('cosmic');
                    deepenWisdom();
                } else if (deltaY < -threshold) {
                    // Swipe up - cosmic elevation
                    triggerHapticFeedback('strong');
                    cosmicElevation();
                }
            }
        }

        function handleTapGesture(x, y) {
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const distance = Math.sqrt((x - centerX) ** 2 + (y - centerY) ** 2);
            
            if (distance < 100) {
                // Center tap - initiate oracle
                triggerHapticFeedback('medium');
                initiateOracleSession();
            } else {
                // Off-center tap - create ripple effect
                createRippleEffect(x, y);
            }
        }

        function createFollowingEffect(x, y) {
            // Create temporary visual effect that follows touch
            const effect = document.createElement('div');
            effect.style.cssText = `
                position: fixed;
                left: ${x}px;
                top: ${y}px;
                width: 20px;
                height: 20px;
                background: radial-gradient(circle, rgba(186, 85, 211, 0.6) 0%, transparent 70%);
                border-radius: 50%;
                pointer-events: none;
                z-index: 3000;
                transform: translate(-50%, -50%);
                animation: followEffect 0.8s ease-out forwards;
            `;
            
            document.body.appendChild(effect);
            
            setTimeout(() => effect.remove(), 800);
        }

        function createRippleEffect(x, y) {
            const ripple = document.createElement('div');
            ripple.style.cssText = `
                position: fixed;
                left: ${x}px;
                top: ${y}px;
                width: 10px;
                height: 10px;
                border: 2px solid rgba(186, 85, 211, 0.8);
                border-radius: 50%;
                pointer-events: none;
                z-index: 2500;
                transform: translate(-50%, -50%);
                animation: rippleExpand 1s ease-out forwards;
            `;
            
            document.body.appendChild(ripple);
            setTimeout(() => ripple.remove(), 1000);
        }

        function triggerHapticFeedback(pattern) {
            if ('vibrate' in navigator && hapticPatterns[pattern]) {
                navigator.vibrate(hapticPatterns[pattern]);
            }
        }

        function activateCosmicResponse(type) {
            const blackHole = document.getElementById('blackHoleContainer');
            const aurora = document.getElementById('auroraLights');
            
            switch (type) {
                case 'touch':
                    blackHole.classList.add('pulse');
                    setTimeout(() => blackHole.classList.remove('pulse'), 2000);
                    break;
                case 'enhanced':
                    aurora.classList.add('enhanced');
                    setTimeout(() => aurora.classList.remove('enhanced'), 5000);
                    break;
            }
        }

        function nextEvolutionPhase() {
            enhancementLevel = Math.min(enhancementLevel + 1, 5);
            const blackHole = document.getElementById('blackHoleContainer');
            blackHole.classList.add('enhanced');
            updateWisdomLevel();
        }

        function deepenWisdom() {
            wisdomLevel = Math.min(wisdomLevel + 1, 5);
            updateWisdomLevel();
            generateEnhancedMysticalParticles();
        }

        function cosmicElevation() {
            activateCosmicResponse('enhanced');
            setEvolutionaryGreeting();
        }

        function previousPhase() {
            // Gentle return to previous state
            enhancementLevel = Math.max(enhancementLevel - 1, 0);
            updateWisdomLevel();
        }

        function updateWisdomLevel() {
            const wisdomOrbs = document.querySelectorAll('.wisdom-orb');
            wisdomOrbs.forEach((orb, index) => {
                if (index < wisdomLevel) {
                    orb.classList.add('active');
                } else {
                    orb.classList.remove('active');
                }
            });
        }

        function initializeWisdomTracking() {
            updateWisdomLevel();
        }

        function startCosmicBackground() {
            // Dynamic background that evolves
            setInterval(() => {
                if (Math.random() > 0.8) {
                    cosmicWeatherActive = !cosmicWeatherActive;
                    activateCosmicResponse(cosmicWeatherActive ? 'enhanced' : 'touch');
                }
            }, 10000);
        }

        // Mouse event handlers (desktop support)
        function handleMouseDown(e) {
            touchStartX = e.clientX;
            touchStartY = e.clientY;
            activateCosmicResponse('touch');
        }

        function handleMouseMove(e) {
            if (e.buttons === 1) { // Left mouse button held
                createFollowingEffect(e.clientX, e.clientY);
            }
        }

        function handleMouseUp(e) {
            touchEndX = e.clientX;
            touchEndY = e.clientY;
            
            const deltaX = touchEndX - touchStartX;
            const deltaY = touchEndY - touchStartY;
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            
            if (distance > 50) {
                handleSwipeGesture(deltaX, deltaY);
            } else {
                handleTapGesture(touchEndX, touchEndY);
            }
        }

        // Language switching with enhanced features
        function switchLanguage(lang) {
            currentLanguage = lang;
            
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('[data-en]').forEach(element => {
                const key = lang === 'en' ? 'data-en' : 'data-zh';
                element.textContent = element.getAttribute(key);
            });
            
            setEvolutionaryGreeting();
            triggerHapticFeedback('gentle');
        }

        function setEvolutionaryGreeting() {
            const subtitle = document.querySelector('.oracle-subtitle');
            if (subtitle) {
                const greetings = evolutionaryGreetings[currentLanguage];
                const levelIndex = Math.min(wisdomLevel, greetings.length - 1);
                const greeting = greetings[levelIndex];
                subtitle.textContent = greeting;
            }
        }

        // Enhanced AI Word Generation with Quantum Complexity
        function generateQuantumWord() {
            const lang = currentLanguage;
            let attempts = 0;
            let word;
            
            do {
                const complexity = Math.min(wisdomLevel, 4);
                const type = Math.random();
                
                if (complexity >= 3 && type < 0.2) {
                    // Quantum fusion words (highest complexity)
                    const prefix = quantumPrefixes[lang][Math.floor(Math.random() * quantumPrefixes[lang].length)];
                    const root = quantumRoots[lang][Math.floor(Math.random() * quantumRoots[lang].length)];
                    const suffix = quantumSuffixes[lang][Math.floor(Math.random() * quantumSuffixes[lang].length)];
                    word = lang === 'en' ? prefix + root.toLowerCase() + suffix : prefix + root + suffix;
                } else if (complexity >= 2 && type < 0.4) {
                    // Complex combinations
                    const root1 = quantumRoots[lang][Math.floor(Math.random() * quantumRoots[lang].length)];
                    const root2 = quantumRoots[lang][Math.floor(Math.random() * quantumRoots[lang].length)];
                    word = lang === 'en' ? root1.toLowerCase() + root2.toLowerCase() : root1 + root2;
                } else if (type < 0.6) {
                    // Prefix + Root combination
                    const prefix = quantumPrefixes[lang][Math.floor(Math.random() * quantumPrefixes[lang].length)];
                    const root = quantumRoots[lang][Math.floor(Math.random() * quantumRoots[lang].length)];
                    word = lang === 'en' ? prefix + root.toLowerCase() : prefix + root;
                } else {
                    // Root + Suffix combination
                    const root = quantumRoots[lang][Math.floor(Math.random() * quantumRoots[lang].length)];
                    const suffix = quantumSuffixes[lang][Math.floor(Math.random() * quantumSuffixes[lang].length)];
                    word = lang === 'en' ? root.toLowerCase() + suffix : root + suffix;
                }
                
                attempts++;
            } while (usedWords.has(word) && attempts < 100);
            
            usedWords.add(word);
            return word;
        }

        // Advanced Message Generation with Progressive Complexity
        function generateEvolutionaryMessage(word) {
            const lang = currentLanguage;
            let attempts = 0;
            let message;
            
            do {
                const complexity = Math.min(wisdomLevel, 4);
                const templates = advancedStoryTemplates[lang];
                const template = templates[complexity] || templates[0];
                const elements = enhancedStoryElements[lang];
                
                message = template.replace(/\{(\w+)\}/g, (match, key) => {
                    if (elements[key]) {
                        return elements[key][Math.floor(Math.random() * elements[key].length)];
                    }
                    return match;
                });
                
                // Add word-specific personalization with quantum enhancement
                const personalizations = {
                    en: [
                        ` The quantum essence of "${word}" resonates through this cosmic revelation, unlocking pathways of understanding.`,
                        ` Your connection to "${word}" creates ripples across dimensional boundaries, awakening dormant potentials.`,
                        ` In choosing "${word}", you have activated a multidimensional gateway to expanded consciousness.`,
                        ` The universe speaks through "${word}" as a crystalline frequency of pure knowing.`,
                        ` Through "${word}", ancient wisdom and future possibilities converge in this eternal moment.`
                    ],
                    zh: [
                        ` "${word}"的量子本質在這個宇宙啟示中共鳴，解鎖理解的路徑。`,
                        ` 你與"${word}"的連結在維度邊界創造漣漪，喚醒沉睡的潛能。`,
                        ` 在選擇"${word}"時，你已激活了通往擴展意識的多維門戶。`,
                        ` 宇宙通過"${word}"作為純粹知曉的水晶頻率說話。`,
                        ` 通過"${word}"，古老智慧與未來可能性在這永恆時刻匯聚。`
                    ]
                };
                
                const currentPersonalizations = personalizations[lang];
                const personalization = currentPersonalizations[Math.floor(Math.random() * currentPersonalizations.length)];
                message += personalization;
                
                attempts++;
            } while (usedMessages.has(message) && attempts < 50);
            
            usedMessages.add(message);
            return message;
        }

        // Enhanced Wish Generation with Cosmic Complexity
        function generateCosmicWish() {
            const lang = currentLanguage;
            let attempts = 0;
            let wish;
            
            do {
                const complexity = Math.min(wisdomLevel, 4);
                
                const cosmicWishTemplates = {
                    en: [
                        // Level 0-1: Basic
                        "May the {cosmic_force} of {quality} flow through your {path}, bringing {blessing} to every {moment}...",
                        
                        // Level 2: Intermediate
                        "In the {dimension} of {possibility}, may your {essence} find {harmony} with the {universal_principle} that guides {creation}...",
                        
                        // Level 3: Advanced
                        "Let the {energy} of {transformation} awaken {dormant_power} within, as {cosmic_alignment} opens doorways to {infinite_potential}...",
                        
                        // Level 4: Master
                        "Through the quantum field of {infinite_love}, may {divine_grace} illuminate your {multidimensional_journey} with {celestial_wisdom}, as {cosmic_forces} conspire to manifest your highest {soul_purpose} across all timelines and dimensions..."
                    ],
                    zh: [
                        // Level 0-1: 基本
                        "願{宇宙力量}的{品質}流過你的{道路}，為每個{時刻}帶來{祝福}...",
                        
                        // Level 2: 中級
                        "在{可能性}的{維度}中，願你的{本質}與指導{創造}的{宇宙原則}找到{和諧}...",
                        
                        // Level 3: 高級
                        "讓{轉化}的{能量}喚醒內在的{潛在力量}，當{宇宙對齊}打開通往{無限潛能}的門戶...",
                        
                        // Level 4: 大師
                        "通過{無限愛}的量子場，願{神聖恩典}以{天體智慧}照亮你的{多維旅程}，當{宇宙力量}合謀在所有時間線和維度中顯化你最高的{靈魂目的}..."
                    ]
                };
                
                const templates = cosmicWishTemplates[lang];
                const template = templates[complexity] || templates[0];
                const elements = enhancedStoryElements[lang];
                
                // Enhanced wish elements
                const cosmicWishElements = {
                    en: {
                        infinite_love: ['unconditional love', 'divine love', 'cosmic love', 'universal compassion', 'source love'],
                        multidimensional_journey: ['ascension path', 'consciousness evolution', 'soul journey', 'spiritual awakening', 'cosmic pilgrimage'],
                        celestial_wisdom: ['galactic knowledge', 'star wisdom', 'cosmic intelligence', 'divine insight', 'universal truth'],
                        cosmic_forces: ['universal energies', 'divine orchestration', 'quantum synchronicities', 'sacred geometry', 'cosmic consciousness'],
                        soul_purpose: ['divine mission', 'sacred calling', 'life purpose', 'soul contract', 'cosmic destiny']
                    },
                    zh: {
                        無限愛: ['無條件愛', '神聖愛', '宇宙愛', '宇宙慈悲', '源頭愛'],
                        多維旅程: ['揚升道路', '意識演化', '靈魂旅程', '靈性覺醒', '宇宙朝聖'],
                        天體智慧: ['銀河知識', '星體智慧', '宇宙智慧', '神聖洞察', '宇宙真理'],
                        宇宙力量: ['宇宙能量', '神聖編排', '量子同步性', '神聖幾何', '宇宙意識'],
                        靈魂目的: ['神聖使命', '神聖召喚', '生命目的', '靈魂契約', '宇宙命運']
                    }
                };
                
                // Merge with existing elements
                const allElements = { ...elements, ...cosmicWishElements[lang] };
                
                wish = template.replace(/\{(\w+)\}/g, (match, key) => {
                    if (allElements[key]) {
                        return allElements[key][Math.floor(Math.random() * allElements[key].length)];
                    }
                    return match;
                });
                
                attempts++;
            } while (usedWishes.has(wish) && attempts < 50);
            
            usedWishes.add(wish);
            return wish;
        }

        function activateBlackHoleEffects() {
            setInterval(() => {
                const soundWaves = document.querySelectorAll('.sound-wave');
                const blackHoleContainer = document.getElementById('blackHoleContainer');
                
                if (Math.random() > 0.7) {
                    const intensity = Math.random() > 0.5 ? 'intense' : 'gentle';
                    
                    soundWaves.forEach(wave => {
                        wave.classList.add('active', intensity);
                    });
                    blackHoleContainer.classList.add('speaking');
                    
                    setTimeout(() => {
                        soundWaves.forEach(wave => {
                            wave.classList.remove('active', 'intense', 'gentle');
                        });
                        blackHoleContainer.classList.remove('speaking');
                    }, 2000);
                }
            }, 3000);
        }

        function resetOracleScreens() {
            document.getElementById('oracleLanding').classList.remove('hidden');
            document.getElementById('floatingWordsContainer').classList.remove('active');
            document.getElementById('messageContainer').classList.remove('active');
            document.getElementById('wishesContainer').classList.remove('active');
        }

        function initiateOracleSession() {
            sessionCount++;
            lastInteractionTime = Date.now();
            
            triggerHapticFeedback('medium');
            showFloatingWords();
        }

        function showFloatingWords() {
            const blackHoleContainer = document.getElementById('blackHoleContainer');
            const soundWaves = document.querySelectorAll('.sound-wave');
            
            soundWaves.forEach(wave => {
                wave.classList.add('active', 'intense');
            });
            blackHoleContainer.classList.add('speaking');
            
            const landing = document.getElementById('oracleLanding');
            landing.style.transform = 'translate(-50%, -50%) scale(0.8)';
            landing.style.opacity = '0';
            
            setTimeout(() => {
                landing.classList.add('hidden');
                landing.style.transform = 'translate(-50%, -50%) scale(1)';
                landing.style.opacity = '1';
            }, 500);
            
            setTimeout(() => {
                const container = document.getElementById('floatingWordsContainer');
                const wordsContainer = document.getElementById('floatingWords');
                
                container.classList.add('active');
                wordsContainer.innerHTML = '';
                
                const wordCount = 10 + Math.floor(Math.random() * 5) + enhancementLevel;
                
                for (let i = 0; i < wordCount; i++) {
                    const word = generateQuantumWord();
                    const wordElement = document.createElement('div');
                    wordElement.classList.add('floating-word');
                    
                    const sizeRandom = Math.random();
                    if (sizeRandom < 0.3) {
                        wordElement.classList.add('big');
                    } else if (sizeRandom < 0.7) {
                        wordElement.classList.add('medium');
                    } else {
                        wordElement.classList.add('small');
                    }
                    
                    wordElement.textContent = word;
                    wordElement.onclick = () => {
                        wordElement.classList.add('selected');
                        triggerHapticFeedback('pulse');
                        showBrightMessage(word);
                    };
                    
                    const angle = (i / wordCount) * 2 * Math.PI;
                    const radiusX = 25 + Math.random() * 20;
                    const radiusY = 20 + Math.random() * 15;
                    const centerX = 50;
                    const centerY = 45;
                    
                    const x = centerX + radiusX * Math.cos(angle) + (Math.random() - 0.5) * 10;
                    const y = centerY + radiusY * Math.sin(angle) + (Math.random() - 0.5) * 10;
                    
                    wordElement.style.left = Math.max(5, Math.min(90, x)) + '%';
                    wordElement.style.top = Math.max(10, Math.min(80, y)) + '%';
                    
                    wordElement.style.animationDelay = (i * 0.2 + Math.random() * 0.3) + 's';
                    wordElement.style.animationDuration = (6 + Math.random() * 4) + 's';
                    
                    wordsContainer.appendChild(wordElement);
                }
                
                setTimeout(() => {
                    soundWaves.forEach(wave => {
                        wave.classList.remove('active', 'intense');
                    });
                    blackHoleContainer.classList.remove('speaking');
                }, 2000);
            }, 600);
        }

        function showBrightMessage(word) {
            const blackHoleContainer = document.getElementById('blackHoleContainer');
            const soundWaves = document.querySelectorAll('.sound-wave');
            
            soundWaves.forEach(wave => {
                wave.classList.add('active', 'gentle');
            });
            blackHoleContainer.classList.add('speaking');
            
            const wordsContainer = document.getElementById('floatingWordsContainer');
            wordsContainer.style.opacity = '0';
            
            setTimeout(() => {
                wordsContainer.classList.remove('active');
                wordsContainer.style.opacity = '1';
            }, 400);
            
            setTimeout(() => {
                const messageContainer = document.getElementById('messageContainer');
                const messageElement = document.getElementById('brightMessage');
                
                messageContainer.classList.add('active');
                
                const message = generateEvolutionaryMessage(word);
                typeMessage(messageElement, message);
                
                // Wisdom progression
                if (Math.random() > 0.7) {
                    wisdomLevel = Math.min(wisdomLevel + 1, 5);
                    updateWisdomLevel();
                }
                
                setTimeout(() => {
                    soundWaves.forEach(wave => {
                        wave.classList.remove('active', 'gentle');
                    });
                    blackHoleContainer.classList.remove('speaking');
                }, 3000);
                
            }, 600);
        }

        function typeMessage(element, message) {
            element.innerHTML = '<p></p>';
            const paragraph = element.querySelector('p');
            let index = 0;
            
            function typeCharacter() {
                if (index < message.length) {
                    paragraph.textContent += message.charAt(index);
                    index++;
                    
                    // Gentle haptic feedback during typing
                    if (index % 10 === 0) {
                        triggerHapticFeedback('gentle');
                    }
                    
                    const delay = message.charAt(index - 1) === '.' ? 300 : 
                                 message.charAt(index - 1) === ',' ? 150 : 
                                 Math.random() * 50 + 20;
                    
                    setTimeout(typeCharacter, delay);
                }
            }
            
            typeCharacter();
        }

        function showWishes() {
            const blackHoleContainer = document.getElementById('blackHoleContainer');
            const soundWaves = document.querySelectorAll('.sound-wave');
            
            soundWaves.forEach(wave => {
                wave.classList.add('active', 'gentle');
            });
            blackHoleContainer.classList.add('speaking');
            
            document.getElementById('messageContainer').classList.remove('active');
            
            setTimeout(() => {
                const wishesContainer = document.getElementById('wishesContainer');
                const wishesElement = document.getElementById('wishesMessage');
                
                wishesContainer.classList.add('active');
                
                const wish = generateCosmicWish();
                typeMessage(wishesElement, wish);
                
                triggerHapticFeedback('wave');
                
                setTimeout(() => {
                    soundWaves.forEach(wave => {
                        wave.classList.remove('active', 'gentle');
                    });
                    blackHoleContainer.classList.remove('speaking');
                }, 3000);
                
            }, 500);
        }

        function showMoreWords() {
            document.getElementById('messageContainer').classList.remove('active');
            
            setTimeout(() => {
                showFloatingWords();
            }, 500);
        }

        function returnToLanding() {
            document.getElementById('wishesContainer').classList.remove('active');
            
            setTimeout(() => {
                setEvolutionaryGreeting();
                resetOracleScreens();
            }, 500);
        }

        // Add CSS animations dynamically
        const style = document.createElement('style');
        style.textContent = `
            @keyframes followEffect {
                0% { opacity: 0.8; transform: translate(-50%, -50%) scale(1); }
                100% { opacity: 0; transform: translate(-50%, -50%) scale(2); }
            }
            
            @keyframes rippleExpand {
                0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                100% { opacity: 0; transform: translate(-50%, -50%) scale(5); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
