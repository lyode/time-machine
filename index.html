<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renovation Quotation Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #2d3748;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 100%;
            min-height: 100vh;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 16px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .header p {
            color: #718096;
            font-size: 14px;
        }

        .tab-navigation {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            padding: 8px;
            position: sticky;
            top: 80px;
            z-index: 99;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .tab-btn {
            flex: 1;
            padding: 12px 8px;
            border: none;
            background: transparent;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #718096;
            text-align: center;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .content-container {
            padding: 16px;
            padding-bottom: 100px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }

        @media (min-width: 640px) {
            .form-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #4a5568;
            font-size: 14px;
        }

        .form-input,
        .form-select,
        .form-textarea {
            padding: 14px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 50px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover,
        .btn-primary:active {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .btn-secondary {
            background: #f7fafc;
            color: #4a5568;
            border: 2px solid #e2e8f0;
        }

        .btn-success {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
            color: white;
        }

        .btn-full {
            width: 100%;
            margin-bottom: 12px;
        }

        .btn-small {
            padding: 8px 12px;
            font-size: 14px;
            min-height: 36px;
        }

        .renovation-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .category-btn {
            padding: 16px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            color: #4a5568;
        }

        .category-btn:hover,
        .category-btn:active {
            border-color: #667eea;
            background: #f8fafc;
            transform: scale(1.02);
        }

        .category-btn.selected {
            border-color: #667eea;
            background: #e6fffa;
            color: #2d3748;
        }

        .items-container {
            margin-top: 20px;
        }

        .item-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr auto;
            gap: 8px;
            margin-bottom: 12px;
            align-items: end;
            padding: 12px;
            background: #f8fafc;
            border-radius: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .item-row:hover {
            border-color: #e2e8f0;
            background: white;
        }

        .item-input {
            padding: 10px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
        }

        .item-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .remove-btn {
            background: #fed7d7;
            color: #c53030;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            min-height: 40px;
            min-width: 40px;
        }

        .add-item-btn {
            width: 100%;
            padding: 12px;
            border: 2px dashed #cbd5e1;
            border-radius: 12px;
            background: transparent;
            color: #667eea;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .add-item-btn:hover {
            border-color: #667eea;
            background: #f8fafc;
        }

        .totals-section {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            border-left: 4px solid #667eea;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .total-row.grand-total {
            font-weight: 700;
            font-size: 20px;
            padding-top: 12px;
            border-top: 2px solid #cbd5e1;
            color: #667eea;
        }

        .quote-preview {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            max-height: 600px;
            overflow-y: auto;
        }

        .quote-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .company-logo {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .quote-title {
            font-size: 28px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .quote-subtitle {
            color: #718096;
            font-size: 16px;
        }

        .quote-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 640px) {
            .quote-info {
                grid-template-columns: 1fr;
            }
        }

        .info-section {
            background: #f8fafc;
            padding: 16px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .info-title {
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .quote-items {
            margin: 30px 0;
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .items-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }

        .items-table td {
            padding: 12px;
            border-bottom: 1px solid #e2e8f0;
            vertical-align: top;
        }

        .items-table tr:last-child td {
            border-bottom: none;
        }

        .items-table tr:nth-child(even) {
            background: #f8fafc;
        }

        .category-header {
            background: #edf2f7;
            font-weight: 700;
            color: #4a5568;
            font-style: italic;
        }

        .category-header td {
            padding: 12px;
            border-top: 2px solid #cbd5e1;
        }

        .floating-actions {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 16px;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
        }

        .notification {
            position: fixed;
            top: 100px;
            left: 16px;
            right: 16px;
            padding: 16px 20px;
            background: #48bb78;
            color: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            transform: translateY(-100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 2000;
            text-align: center;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .notification.error {
            background: #f56565;
        }

        .saved-quotes {
            display: grid;
            gap: 12px;
        }

        .quote-card {
            background: white;
            padding: 16px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quote-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .quote-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 8px;
        }

        .quote-card-title {
            font-weight: 700;
            color: #2d3748;
        }

        .quote-card-amount {
            font-weight: 700;
            color: #667eea;
            font-size: 18px;
        }

        .quote-card-details {
            color: #718096;
            font-size: 14px;
        }

        .quote-card-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .card-action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        @media (max-width: 640px) {
            .header {
                padding: 16px;
            }

            .header h1 {
                font-size: 20px;
            }

            .content-container {
                padding: 12px;
            }

            .item-row {
                grid-template-columns: 1fr;
                gap: 8px;
                text-align: left;
            }

            .action-buttons {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .quote-info {
                grid-template-columns: 1fr;
            }

            .renovation-categories {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media print {
            body {
                background: white;
                color: black;
            }

            .header,
            .tab-navigation,
            .floating-actions {
                display: none;
            }

            .content-container {
                padding: 0;
            }

            .tab-content {
                display: none;
            }

            .tab-content.active {
                display: block;
            }

            .quote-preview {
                box-shadow: none;
                border-radius: 0;
                max-height: none;
                overflow: visible;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <h1>üèóÔ∏è Renovation Quotation Pro</h1>
            <p>Professional quotations for renovation projects</p>
        </header>

        <nav class="tab-navigation">
            <button class="tab-btn active" onclick="switchTab('customer')">üë§ Customer</button>
            <button class="tab-btn" onclick="switchTab('project')">üè† Project</button>
            <button class="tab-btn" onclick="switchTab('quote')">üìã Quote</button>
            <button class="tab-btn" onclick="switchTab('saved')">üíæ Saved</button>
        </nav>

        <div class="content-container">
            <!-- Customer Details Tab -->
            <div id="customer" class="tab-content active">
                <div class="card">
                    <h2 class="section-title">üë§ Customer Information</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label" for="customerName">Customer Name *</label>
                            <input type="text" id="customerName" class="form-input" placeholder="John & Jane Smith" oninput="updateQuote()">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="customerPhone">Phone Number</label>
                            <input type="tel" id="customerPhone" class="form-input" placeholder="+1 (555) 123-4567" oninput="updateQuote()">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="customerEmail">Email Address</label>
                            <input type="email" id="customerEmail" class="form-input" placeholder="john.smith@email.com" oninput="updateQuote()">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="projectDate">Project Start Date</label>
                            <input type="date" id="projectDate" class="form-input" oninput="updateQuote()">
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label" for="propertyAddress">Property Address</label>
                            <textarea id="propertyAddress" class="form-textarea" placeholder="123 Main Street, City, State, ZIP Code" oninput="updateQuote()"></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label" for="projectDescription">Project Description</label>
                            <textarea id="projectDescription" class="form-textarea" placeholder="Brief description of the renovation project..." oninput="updateQuote()"></textarea>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2 class="section-title">üè¢ Company Information</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label" for="companyName">Company Name</label>
                            <input type="text" id="companyName" class="form-input" placeholder="Smith Renovation Co." value="Elite Renovation Solutions" oninput="updateQuote()">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="companyPhone">Company Phone</label>
                            <input type="tel" id="companyPhone" class="form-input" placeholder="+1 (555) 987-6543" value="+1 (555) 987-6543" oninput="updateQuote()">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="companyEmail">Company Email</label>
                            <input type="email" id="companyEmail" class="form-input" placeholder="info@renovation.com" value="info@eliterenovation.com" oninput="updateQuote()">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="licenseNumber">License Number</label>
                            <input type="text" id="licenseNumber" class="form-input" placeholder="LIC-123456" value="LIC-789456" oninput="updateQuote()">
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label" for="companyAddress">Company Address</label>
                            <textarea id="companyAddress" class="form-textarea" placeholder="456 Business Ave, City, State, ZIP" oninput="updateQuote()">456 Business Avenue, Suite 200, Springfield, IL 62701</textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Project Details Tab -->
            <div id="project" class="tab-content">
                <div class="card">
                    <h2 class="section-title">üè† Renovation Categories</h2>
                    <div class="renovation-categories">
                        <div class="category-btn" onclick="selectCategory('kitchen')" data-category="kitchen">
                            <div>üç≥</div>
                            <div>Kitchen</div>
                        </div>
                        <div class="category-btn" onclick="selectCategory('bathroom')" data-category="bathroom">
                            <div>üõÅ</div>
                            <div>Bathroom</div>
                        </div>
                        <div class="category-btn" onclick="selectCategory('living')" data-category="living">
                            <div>üõãÔ∏è</div>
                            <div>Living Room</div>
                        </div>
                        <div class="category-btn" onclick="selectCategory('bedroom')" data-category="bedroom">
                            <div>üõèÔ∏è</div>
                            <div>Bedroom</div>
                        </div>
                        <div class="category-btn" onclick="selectCategory('flooring')" data-category="flooring">
                            <div>üè†</div>
                            <div>Flooring</div>
                        </div>
                        <div class="category-btn" onclick="selectCategory('exterior')" data-category="exterior">
                            <div>üè°</div>
                            <div>Exterior</div>
                        </div>
                        <div class="category-btn" onclick="selectCategory('electrical')" data-category="electrical">
                            <div>‚ö°</div>
                            <div>Electrical</div>
                        </div>
                        <div class="category-btn" onclick="selectCategory('plumbing')" data-category="plumbing">
                            <div>üîß</div>
                            <div>Plumbing</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2 class="section-title">üìù Project Items</h2>
                    <div class="items-container" id="itemsContainer">
                        <!-- Items will be added dynamically -->
                    </div>
                    <button class="add-item-btn" onclick="addItem()">
                        ‚ûï Add Item
                    </button>
                </div>

                <div class="card">
                    <h2 class="section-title">üí∞ Project Totals</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label" for="discountPercent">Discount (%)</label>
                            <input type="number" id="discountPercent" class="form-input" placeholder="0" min="0" max="100" step="0.1" oninput="calculateTotals()">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="taxPercent">Tax (%)</label>
                            <input type="number" id="taxPercent" class="form-input" placeholder="8.5" min="0" max="100" step="0.1" value="8.5" oninput="calculateTotals()">
                        </div>
                    </div>
                    <div class="totals-section" id="totalsSection">
                        <div class="total-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">$0.00</span>
                        </div>
                        <div class="total-row">
                            <span>Discount:</span>
                            <span id="discount">$0.00</span>
                        </div>
                        <div class="total-row">
                            <span>Tax:</span>
                            <span id="tax">$0.00</span>
                        </div>
                        <div class="total-row grand-total">
                            <span>Total:</span>
                            <span id="grandTotal">$0.00</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quote Preview Tab -->
            <div id="quote" class="tab-content">
                <div class="quote-preview">
                    <div class="quote-header">
                        <div class="company-logo">üèóÔ∏è</div>
                        <h1 class="quote-title">RENOVATION QUOTATION</h1>
                        <p class="quote-subtitle">Professional Renovation Services</p>
                    </div>

                    <div class="quote-info">
                        <div class="info-section">
                            <div class="info-title">Company Information</div>
                            <div id="quoteCompanyInfo">
                                <p><strong id="quoteCompanyName">Elite Renovation Solutions</strong></p>
                                <p id="quoteCompanyAddress">456 Business Avenue, Suite 200<br>Springfield, IL 62701</p>
                                <p>Phone: <span id="quoteCompanyPhone">+1 (555) 987-6543</span></p>
                                <p>Email: <span id="quoteCompanyEmail">info@eliterenovation.com</span></p>
                                <p>License: <span id="quoteLicenseNumber">LIC-789456</span></p>
                            </div>
                        </div>

                        <div class="info-section">
                            <div class="info-title">Customer Information</div>
                            <div id="quoteCustomerInfo">
                                <p><strong id="quoteCustomerName">[Customer Name]</strong></p>
                                <p id="quotePropertyAddress">[Property Address]</p>
                                <p>Phone: <span id="quoteCustomerPhone">[Phone]</span></p>
                                <p>Email: <span id="quoteCustomerEmail">[Email]</span></p>
                                <p>Project Date: <span id="quoteProjectDate">[Date]</span></p>
                            </div>
                        </div>
                    </div>

                    <div class="info-section" style="margin-bottom: 20px;">
                        <div class="info-title">Project Description</div>
                        <p id="quoteProjectDescription">[Project Description]</p>
                    </div>

                    <div class="quote-items">
                        <table class="items-table" id="quoteItemsTable">
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th>Qty</th>
                                    <th>Unit Price</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody id="quoteItemsBody">
                                <!-- Items will be populated here -->
                            </tbody>
                        </table>
                    </div>

                    <div class="totals-section">
                        <div class="total-row">
                            <span>Subtotal:</span>
                            <span id="quoteSubtotal">$0.00</span>
                        </div>
                        <div class="total-row">
                            <span>Discount (<span id="quoteDiscountPercent">0</span>%):</span>
                            <span id="quoteDiscount">$0.00</span>
                        </div>
                        <div class="total-row">
                            <span>Tax (<span id="quoteTaxPercent">8.5</span>%):</span>
                            <span id="quoteTax">$0.00</span>
                        </div>
                        <div class="total-row grand-total">
                            <span>TOTAL:</span>
                            <span id="quoteGrandTotal">$0.00</span>
                        </div>
                    </div>

                    <div style="margin-top: 30px; padding: 20px; background: #f8fafc; border-radius: 12px; border-left: 4px solid #667eea;">
                        <h3 style="margin-bottom: 12px; color: #2d3748;">Terms & Conditions</h3>
                        <ul style="color: #4a5568; font-size: 14px; line-height: 1.6;">
                            <li>Quote valid for 30 days from date issued</li>
                            <li>50% deposit required to begin work</li>
                            <li>Final payment due upon completion</li>
                            <li>All materials and labor included unless specified</li>
                            <li>Changes to scope may affect final price</li>
                            <li>Work guaranteed for 1 year from completion</li>
                        </ul>
                    </div>

                    <div style="margin-top: 30px; text-align: center; border-top: 2px solid #e2e8f0; padding-top: 20px;">
                        <p style="color: #718096; font-size: 14px;">
                            Thank you for choosing our renovation services!<br>
                            Quote generated on: <span id="quoteDate"></span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Saved Quotes Tab -->
            <div id="saved" class="tab-content">
                <div class="card">
                    <h2 class="section-title">üíæ Saved Quotations</h2>
                    <div class="saved-quotes" id="savedQuotes">
                        <!-- Saved quotes will be displayed here -->
                    </div>
                </div>
            </div>
        </div>

        <div class="floating-actions">
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="generateQuote()">
                    üìù Generate
                </button>
                <button class="btn btn-success" onclick="saveQuote()">
                    üíæ Save Quote
                </button>
                <button class="btn btn-warning" onclick="printQuote()">
                    üñ®Ô∏è Print
                </button>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        let currentTab = 'customer';
        let projectItems = [];
        let currentCategory = '';
        let savedQuotes = JSON.parse(localStorage.getItem('renovationQuotes') || '[]');

        const renovationItems = {
            kitchen: [
                { name: 'Cabinet Installation', unit: 'linear ft', price: 150 },
                { name: 'Countertop Installation', unit: 'sq ft', price: 45 },
                { name: 'Backsplash Tiling', unit: 'sq ft', price: 25 },
                { name: 'Sink Installation', unit: 'each', price: 350 },
                { name: 'Faucet Installation', unit: 'each', price: 200 },
                { name: 'Kitchen Island', unit: 'each', price: 2500 },
                { name: 'Appliance Installation', unit: 'each', price: 150 },
                { name: 'Electrical Outlets', unit: 'each', price: 120 },
                { name: 'Under-Cabinet Lighting', unit: 'linear ft', price: 35 }
            ],
            bathroom: [
                { name: 'Tile Installation', unit: 'sq ft', price: 12 },
                { name: 'Vanity Installation', unit: 'each', price: 450 },
                { name: 'Toilet Installation', unit: 'each', price: 250 },
                { name: 'Shower Installation', unit: 'each', price: 1200 },
                { name: 'Bathtub Installation', unit: 'each', price: 800 },
                { name: 'Mirror Installation', unit: 'each', price: 150 },
                { name: 'Exhaust Fan', unit: 'each', price: 180 },
                { name: 'Towel Bars/Accessories', unit: 'set', price: 85 }
            ],
            living: [
                { name: 'Drywall Installation', unit: 'sq ft', price: 2.5 },
                { name: 'Paint (walls)', unit: 'sq ft', price: 1.8 },
                { name: 'Crown Molding', unit: 'linear ft', price: 8 },
                { name: 'Baseboards', unit: 'linear ft', price: 6 },
                { name: 'Built-in Shelving', unit: 'linear ft', price: 125 },
                { name: 'Fireplace Surround', unit: 'each', price: 850 },
                { name: 'Window Installation', unit: 'each', price: 450 }
            ],
            bedroom: [
                { name: 'Closet Organization', unit: 'linear ft', price: 85 },
                { name: 'Built-in Wardrobe', unit: 'linear ft', price: 200 },
                { name: 'Bedroom Paint', unit: 'sq ft', price: 1.8 },
                { name: 'Ceiling Fan Installation', unit: 'each', price: 180 },
                { name: 'Window Treatments', unit: 'each', price: 120 }
            ],
            flooring: [
                { name: 'Hardwood Installation', unit: 'sq ft', price: 8 },
                { name: 'Laminate Installation', unit: 'sq ft', price: 4.5 },
                { name: 'Tile Installation', unit: 'sq ft', price: 12 },
                { name: 'Carpet Installation', unit: 'sq ft', price: 3.5 },
                { name: 'Vinyl Plank Installation', unit: 'sq ft', price: 5.5 },
                { name: 'Floor Removal', unit: 'sq ft', price: 2 },
                { name: 'Subfloor Repair', unit: 'sq ft', price: 3.5 }
            ],
            exterior: [
                { name: 'Siding Installation', unit: 'sq ft', price: 8.5 },
                { name: 'Roof Repair', unit: 'sq ft', price: 15 },
                { name: 'Gutter Installation', unit: 'linear ft', price: 12 },
                { name: 'Deck Construction', unit: 'sq ft', price: 25 },
                { name: 'Patio Installation', unit: 'sq ft', price: 18 },
                { name: 'Exterior Paint', unit: 'sq ft', price: 2.2 },
                { name: 'Window Replacement', unit: 'each', price: 550 }
            ],
            electrical: [
                { name: 'Outlet Installation', unit: 'each', price: 120 },
                { name: 'Light Fixture Installation', unit: 'each', price: 85 },
                { name: 'Ceiling Fan Installation', unit: 'each', price: 180 },
                { name: 'Panel Upgrade', unit: 'each', price: 1200 },
                { name: 'GFCI Outlet', unit: 'each', price: 150 },
                { name: 'Recessed Lighting', unit: 'each', price: 95 }
            ],
            plumbing: [
                { name: 'Pipe Installation', unit: 'linear ft', price: 25 },
                { name: 'Fixture Installation', unit: 'each', price: 200 },
                { name: 'Water Heater Installation', unit: 'each', price: 800 },
                { name: 'Drain Cleaning', unit: 'each', price: 150 },
                { name: 'Leak Repair', unit: 'each', price: 180 },
                { name: 'Faucet Replacement', unit: 'each', price: 200 }
            ]
        };

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');

            currentTab = tabName;

            if (tabName === 'quote') {
                updateQuote();
            }
            if (tabName === 'saved') {
                displaySavedQuotes();
            }
        }

        function selectCategory(category) {
            currentCategory = category;
            
            // Update category button styles
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('selected'));
            document.querySelector(`[data-category="${category}"]`).classList.add('selected');

            showNotification(`${category.charAt(0).toUpperCase() + category.slice(1)} category selected`);
        }

        function addItem(preset = null) {
            const container = document.getElementById('itemsContainer');
            const itemIndex = projectItems.length;
            
            const itemData = preset || {
                description: '',
                category: currentCategory || 'general',
                quantity: 1,
                unit: 'each',
                materialCost: 0,
                laborCost: 0
            };

            projectItems.push(itemData);

            const itemRow = document.createElement('div');
            itemRow.className = 'item-row';
            itemRow.innerHTML = `
                <input type="text" class="item-input" placeholder="Item description" 
                       value="${itemData.description}" 
                       onchange="updateItem(${itemIndex}, 'description', this.value)">
                <input type="number" class="item-input" placeholder="Qty" min="1" 
                       value="${itemData.quantity}" 
                       onchange="updateItem(${itemIndex}, 'quantity', this.value)">
                <input type="text" class="item-input" placeholder="Unit" 
                       value="${itemData.unit}" 
                       onchange="updateItem(${itemIndex}, 'unit', this.value)">
                <input type="number" class="item-input" placeholder="Unit Price" min="0" step="0.01" 
                       value="${itemData.materialCost + itemData.laborCost}" 
                       onchange="updateItem(${itemIndex}, 'totalCost', this.value)">
                <button class="remove-btn" onclick="removeItem(${itemIndex})">üóëÔ∏è</button>
            `;

            container.appendChild(itemRow);
            calculateTotals();
        }

        function updateItem(index, field, value) {
            if (field === 'totalCost') {
                projectItems[index].materialCost = parseFloat(value) * 0.6 || 0;
                projectItems[index].laborCost = parseFloat(value) * 0.4 || 0;
            } else {
                projectItems[index][field] = isNaN(value) ? value : parseFloat(value) || value;
            }
            calculateTotals();
        }

        function removeItem(index) {
            projectItems.splice(index, 1);
            refreshItemsContainer();
            calculateTotals();
        }

        function refreshItemsContainer() {
            const container = document.getElementById('itemsContainer');
            container.innerHTML = '';
            const tempItems = [...projectItems];
            projectItems = [];
            tempItems.forEach(item => addItem(item));
        }

        function calculateTotals() {
            const subtotal = projectItems.reduce((sum, item) => {
                return sum + ((item.materialCost + item.laborCost) * item.quantity);
            }, 0);

            const discountPercent = parseFloat(document.getElementById('discountPercent').value) || 0;
            const taxPercent = parseFloat(document.getElementById('taxPercent').value) || 0;

            const discountAmount = subtotal * (discountPercent / 100);
            const afterDiscount = subtotal - discountAmount;
            const taxAmount = afterDiscount * (taxPercent / 100);
            const grandTotal = afterDiscount + taxAmount;

            document.getElementById('subtotal').textContent = formatCurrency(subtotal);
            document.getElementById('discount').textContent = formatCurrency(discountAmount);
            document.getElementById('tax').textContent = formatCurrency(taxAmount);
            document.getElementById('grandTotal').textContent = formatCurrency(grandTotal);

            updateQuote();
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2
            }).format(amount || 0);
        }

        function updateQuote() {
            // Update company info
            document.getElementById('quoteCompanyName').textContent = 
                document.getElementById('companyName').value || 'Elite Renovation Solutions';
            document.getElementById('quoteCompanyAddress').innerHTML = 
                (document.getElementById('companyAddress').value || '456 Business Avenue, Suite 200<br>Springfield, IL 62701').replace(/\n/g, '<br>');
            document.getElementById('quoteCompanyPhone').textContent = 
                document.getElementById('companyPhone').value || '+1 (555) 987-6543';
            document.getElementById('quoteCompanyEmail').textContent = 
                document.getElementById('companyEmail').value || 'info@eliterenovation.com';
            document.getElementById('quoteLicenseNumber').textContent = 
                document.getElementById('licenseNumber').value || 'LIC-789456';

            // Update customer info
            document.getElementById('quoteCustomerName').textContent = 
                document.getElementById('customerName').value || '[Customer Name]';
            document.getElementById('quotePropertyAddress').innerHTML = 
                (document.getElementById('propertyAddress').value || '[Property Address]').replace(/\n/g, '<br>');
            document.getElementById('quoteCustomerPhone').textContent = 
                document.getElementById('customerPhone').value || '[Phone]';
            document.getElementById('quoteCustomerEmail').textContent = 
                document.getElementById('customerEmail').value || '[Email]';
            document.getElementById('quoteProjectDate').textContent = 
                document.getElementById('projectDate').value || '[Date]';
            document.getElementById('quoteProjectDescription').textContent = 
                document.getElementById('projectDescription').value || '[Project Description]';

            // Update items table
            const tbody = document.getElementById('quoteItemsBody');
            tbody.innerHTML = '';

            const itemsByCategory = {};
            projectItems.forEach(item => {
                if (!itemsByCategory[item.category]) {
                    itemsByCategory[item.category] = [];
                }
                itemsByCategory[item.category].push(item);
            });

            Object.entries(itemsByCategory).forEach(([category, items]) => {
                // Category header
                const categoryRow = document.createElement('tr');
                categoryRow.className = 'category-header';
                categoryRow.innerHTML = `
                    <td colspan="4">${category.charAt(0).toUpperCase() + category.slice(1)} Items</td>
                `;
                tbody.appendChild(categoryRow);

                // Items in category
                items.forEach(item => {
                    const row = document.createElement('tr');
                    const unitPrice = item.materialCost + item.laborCost;
                    const totalPrice = unitPrice * item.quantity;
                    
                    row.innerHTML = `
                        <td>${item.description}</td>
                        <td>${item.quantity} ${item.unit}</td>
                        <td>${formatCurrency(unitPrice)}</td>
                        <td>${formatCurrency(totalPrice)}</td>
                    `;
                    tbody.appendChild(row);
                });
            });

            // Update totals
            const subtotal = projectItems.reduce((sum, item) => {
                return sum + ((item.materialCost + item.laborCost) * item.quantity);
            }, 0);

            const discountPercent = parseFloat(document.getElementById('discountPercent').value) || 0;
            const taxPercent = parseFloat(document.getElementById('taxPercent').value) || 0;

            const discountAmount = subtotal * (discountPercent / 100);
            const afterDiscount = subtotal - discountAmount;
            const taxAmount = afterDiscount * (taxPercent / 100);
            const grandTotal = afterDiscount + taxAmount;

            document.getElementById('quoteSubtotal').textContent = formatCurrency(subtotal);
            document.getElementById('quoteDiscountPercent').textContent = discountPercent;
            document.getElementById('quoteDiscount').textContent = formatCurrency(discountAmount);
            document.getElementById('quoteTaxPercent').textContent = taxPercent;
            document.getElementById('quoteTax').textContent = formatCurrency(taxAmount);
            document.getElementById('quoteGrandTotal').textContent = formatCurrency(grandTotal);

            // Update quote date
            document.getElementById('quoteDate').textContent = new Date().toLocaleDateString();
        }

        function generateQuote() {
            if (!document.getElementById('customerName').value) {
                showNotification('Please enter customer name', 'error');
                return;
            }

            if (projectItems.length === 0) {
                showNotification('Please add at least one project item', 'error');
                return;
            }

            updateQuote();
            switchTab('quote');
            document.querySelector('[onclick="switchTab(\'quote\')"]').click();
            showNotification('‚úÖ Quote generated successfully!');
        }

        function saveQuote() {
            if (!document.getElementById('customerName').value) {
                showNotification('Please enter customer name', 'error');
                return;
            }

            const quote = {
                id: Date.now(),
                customerName: document.getElementById('customerName').value,
                customerPhone: document.getElementById('customerPhone').value,
                customerEmail: document.getElementById('customerEmail').value,
                propertyAddress: document.getElementById('propertyAddress').value,
                projectDescription: document.getElementById('projectDescription').value,
                projectDate: document.getElementById('projectDate').value,
                companyName: document.getElementById('companyName').value,
                companyPhone: document.getElementById('companyPhone').value,
                companyEmail: document.getElementById('companyEmail').value,
                companyAddress: document.getElementById('companyAddress').value,
                licenseNumber: document.getElementById('licenseNumber').value,
                items: [...projectItems],
                discountPercent: parseFloat(document.getElementById('discountPercent').value) || 0,
                taxPercent: parseFloat(document.getElementById('taxPercent').value) || 0,
                createdDate: new Date().toISOString()
            };

            const subtotal = projectItems.reduce((sum, item) => {
                return sum + ((item.materialCost + item.laborCost) * item.quantity);
            }, 0);
            const discountAmount = subtotal * (quote.discountPercent / 100);
            const taxAmount = (subtotal - discountAmount) * (quote.taxPercent / 100);
            quote.total = subtotal - discountAmount + taxAmount;

            savedQuotes.unshift(quote);
            localStorage.setItem('renovationQuotes', JSON.stringify(savedQuotes));
            showNotification('üíæ Quote saved successfully!');
        }

        function displaySavedQuotes() {
            const container = document.getElementById('savedQuotes');
            
            if (savedQuotes.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #718096;">
                        <div style="font-size: 48px; margin-bottom: 16px;">üìã</div>
                        <h3>No saved quotes yet</h3>
                        <p>Create and save your first renovation quote</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = savedQuotes.map(quote => `
                <div class="quote-card">
                    <div class="quote-card-header">
                        <div class="quote-card-title">${quote.customerName}</div>
                        <div class="quote-card-amount">${formatCurrency(quote.total)}</div>
                    </div>
                    <div class="quote-card-details">
                        ${quote.propertyAddress || 'No address'} ‚Ä¢ ${new Date(quote.createdDate).toLocaleDateString()}
                        <br>${quote.projectDescription || 'No description'}
                    </div>
                    <div class="quote-card-actions">
                        <button class="card-action-btn btn-primary" onclick="loadQuote(${quote.id})">Load</button>
                        <button class="card-action-btn btn-warning" onclick="printSavedQuote(${quote.id})">Print</button>
                        <button class="card-action-btn btn-secondary" onclick="deleteQuote(${quote.id})">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function loadQuote(id) {
            const quote = savedQuotes.find(q => q.id === id);
            if (!quote) return;

            // Load customer data
            document.getElementById('customerName').value = quote.customerName || '';
            document.getElementById('customerPhone').value = quote.customerPhone || '';
            document.getElementById('customerEmail').value = quote.customerEmail || '';
            document.getElementById('propertyAddress').value = quote.propertyAddress || '';
            document.getElementById('projectDescription').value = quote.projectDescription || '';
            document.getElementById('projectDate').value = quote.projectDate || '';

            // Load company data
            document.getElementById('companyName').value = quote.companyName || '';
            document.getElementById('companyPhone').value = quote.companyPhone || '';
            document.getElementById('companyEmail').value = quote.companyEmail || '';
            document.getElementById('companyAddress').value = quote.companyAddress || '';
            document.getElementById('licenseNumber').value = quote.licenseNumber || '';

            // Load project data
            document.getElementById('discountPercent').value = quote.discountPercent || '';
            document.getElementById('taxPercent').value = quote.taxPercent || 8.5;

            // Load items
            projectItems = [...quote.items];
            refreshItemsContainer();

            showNotification('üìã Quote loaded successfully!');
            switchTab('customer');
            document.querySelector('[onclick="switchTab(\'customer\')"]').click();
        }

        function deleteQuote(id) {
            if (confirm('Are you sure you want to delete this quote?')) {
                savedQuotes = savedQuotes.filter(q => q.id !== id);
                localStorage.setItem('renovationQuotes', JSON.stringify(savedQuotes));
                displaySavedQuotes();
                showNotification('üóëÔ∏è Quote deleted');
            }
        }

        function printQuote() {
            window.print();
        }

        function printSavedQuote(id) {
            loadQuote(id);
            setTimeout(() => {
                generateQuote();
                setTimeout(() => {
                    window.print();
                }, 500);
            }, 500);
        }

        // Add sample items when a category is selected
        document.addEventListener('click', function(e) {
            if (e.target.closest('.category-btn')) {
                const category = e.target.closest('.category-btn').dataset.category;
                if (category && renovationItems[category]) {
                    const items = renovationItems[category].slice(0, 3); // Show first 3 items
                    showNotification(`üí° Tip: Common ${category} items available to add`);
                }
            }
        });

        // Quick add preset items
        function addPresetItem(category, itemName) {
            const presetItems = renovationItems[category];
            const preset = presetItems.find(item => item.name === itemName);
            if (preset) {
                addItem({
                    description: preset.name,
                    category: category,
                    quantity: 1,
                    unit: preset.unit,
                    materialCost: preset.price * 0.6,
                    laborCost: preset.price * 0.4
                });
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date as default project date
            document.getElementById('projectDate').value = new Date().toISOString().split('T')[0];
            
            // Add initial item
            addItem();
            
            // Load saved quotes
            displaySavedQuotes();
            
            showNotification('üèóÔ∏è Renovation Quotation App Ready!');
        });

        // Auto-save form data
        function autoSave() {
            const formData = {
                customerName: document.getElementById('customerName').value,
                customerPhone: document.getElementById('customerPhone').value,
                customerEmail: document.getElementById('customerEmail').value,
                propertyAddress: document.getElementById('propertyAddress').value,
                projectDescription: document.getElementById('projectDescription').value,
                projectDate: document.getElementById('projectDate').value,
                companyName: document.getElementById('companyName').value,
                companyPhone: document.getElementById('companyPhone').value,
                companyEmail: document.getElementById('companyEmail').value,
                companyAddress: document.getElementById('companyAddress').value,
                licenseNumber: document.getElementById('licenseNumber').value,
                discountPercent: document.getElementById('discountPercent').value,
                taxPercent: document.getElementById('taxPercent').value,
                items: projectItems
            };
            localStorage.setItem('currentQuote', JSON.stringify(formData));
        }

        function loadAutoSave() {
            const saved = localStorage.getItem('currentQuote');
            if (saved) {
                const formData = JSON.parse(saved);
                Object.keys(formData).forEach(key => {
                    const element = document.getElementById(key);
                    if (element && key !== 'items') {
                        element.value = formData[key];
                    }
                });
                if (formData.items && formData.items.length > 0) {
                    projectItems = formData.items;
                    refreshItemsContainer();
                }
            }
        }

        // Auto-save every 30 seconds
        setInterval(autoSave, 30000);

        // Load auto-save on page load
        window.addEventListener('load', loadAutoSave);
    </script>
</body>
</html>
